<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>AV Media Planlayıcı</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
    margin:0;
    font-family:Segoe UI,Arial,sans-serif;
    background:#0f172a;
    color:#e5e7eb;
    padding:15px;
}
header{text-align:center;margin-bottom:15px}
header h1{margin:0;font-size:28px}
header span{color:#38bdf8;font-size:13px}

.total{
    background:#020617;
    border:1px solid #1e293b;
    border-radius:12px;
    padding:12px;
    margin-bottom:15px;
    text-align:center;
    font-size:18px;
}

.container{
    display:grid;
    grid-template-columns:1fr;
    gap:15px;
}
@media(min-width:768px){.container{grid-template-columns:repeat(2,1fr)}}
@media(min-width:1200px){.container{grid-template-columns:repeat(3,1fr)}}

.day{
    background:#020617;
    border-radius:14px;
    border:1px solid #1e293b;
}
.day.today{border-left:5px solid #38bdf8}
.day.completed{border-left:5px solid #22c55e}

.day h3{
    margin:0;
    padding:10px;
    position:sticky;
    top:0;
    background:#020617;
    border-bottom:1px solid #1e293b;
}

.add{
    display:flex;
    flex-direction:column;
    gap:6px;
    padding:10px;
}
.add input, .add button{
    padding:8px;
    border-radius:8px;
    border:none;
}
.add button{
    background:#38bdf8;
    font-weight:600;
}

.task{
    border-top:1px solid #1e293b;
    padding:10px;
}
.task strong{display:block}
.task small{color:#94a3b8}
.task label{font-size:13px;margin-right:8px}
.paid{color:#22c55e;font-weight:600}

.finish-all{
    width:90%;
    margin:10px auto;
    display:block;
    padding:8px;
    border:none;
    border-radius:8px;
    background:#22c55e;
    font-weight:600;
}
</style>
</head>

<body>

<header>
    <h1>AV Media Planlayıcı</h1>
    <span>Çekim • Kurgu • Ödeme • Kazanç Takibi</span>
</header>

<div class="total">
    Haftalık Toplam: <strong id="totalAmount">0 ₺</strong>
</div>

<div class="container" id="days"></div>

<script>
const days=["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"];
const today=(new Date().getDay()+6)%7;
let data=JSON.parse(localStorage.getItem("avmedia"))||{};
const container=document.getElementById("days");
const totalEl=document.getElementById("totalAmount");

function calcTotal(){
    let total=0;
    days.forEach(d=>{
        (data[d]||[]).forEach(t=>{
            if(t.pay) total+=Number(t.price||0);
        });
    });
    totalEl.textContent=total+" ₺";
}

days.forEach((day,i)=>{
    if(!data[day]) data[day]=[];
    const card=document.createElement("div");
    card.className="day";
    if(i===today) card.classList.add("today");

    card.innerHTML=`
        <h3>${day}</h3>
        <div class="add">
            <input placeholder="Çekim adı">
            <input type="date">
            <input type="number" placeholder="Ödeme ₺">
            <button>Ekle</button>
        </div>
        <div class="list"></div>
        <button class="finish-all">Hepsi Bitti</button>
    `;
    container.appendChild(card);

    const [nameInput,dateInput,priceInput]=card.querySelectorAll("input");
    const addBtn=card.querySelector("button");
    const list=card.querySelector(".list");
    const finishBtn=card.querySelector(".finish-all");

    function render(){
        list.innerHTML="";
        let done=true;

        data[day].forEach((t,idx)=>{
            if(!(t.shoot&&t.edit&&t.pay)) done=false;
            list.innerHTML+=`
            <div class="task">
                <strong>${t.name}</strong>
                <small>${t.date||""} • ${t.price||0} ₺</small><br>
                <label><input type="checkbox" ${t.shoot?"checked":""} onchange="toggle('${day}',${idx},'shoot')"> Çekim</label>
                <label><input type="checkbox" ${t.edit?"checked":""} onchange="toggle('${day}',${idx},'edit')"> Kurgu</label>
                <label><input type="checkbox" ${t.pay?"checked":""} onchange="toggle('${day}',${idx},'pay')"> <span class="${t.pay?'paid':''}">Ödeme</span></label>
            </div>`;
        });

        card.classList.toggle("completed",data[day].length && done);
        localStorage.setItem("avmedia",JSON.stringify(data));
        calcTotal();
    }

    addBtn.onclick=()=>{
        if(!nameInput.value) return;
        data[day].push({
            name:nameInput.value,
            date:dateInput.value,
            price:priceInput.value,
            shoot:false,edit:false,pay:false
        });
        nameInput.value=dateInput.value=priceInput.value="";
        render();
    };

    finishBtn.onclick=()=>{
        data[day].forEach(t=>t.shoot=t.edit=t.pay=true);
        render();
    };

    render();
});

function toggle(day,i,key){
    data[day][i][key]=!data[day][i][key];
    localStorage.setItem("avmedia",JSON.stringify(data));
    calcTotal();
}
</script>

</body>
</html>
